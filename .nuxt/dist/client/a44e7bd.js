(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{611:function(e,t,n){var content=n(787);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(15).default)("36be5756",content,!0,{sourceMap:!1})},786:function(e,t,n){"use strict";n(611)},787:function(e,t,n){var r=n(14)(!1);r.push([e.i,"ul.clean[data-v-217adfe5]{list-style:none!important;list-style-type:none!important}.ck-editor__editable[data-v-217adfe5],.ck.ck-content.ck-editor__editable[data-v-217adfe5],.ck.ck-content.ck-editor__editable.ck-rounded-corners.ck-editor__editable_inline[data-v-217adfe5],.ck.ck-content.ck-editor__editable_inline[data-v-217adfe5]{height:350px}",""]),e.exports=r},866:function(e,t,n){"use strict";n.r(t);var r=n(54),o=n(20),l=n(13),c=(n(22),n(38),n(43),n(222),n(25),n(29),n(302),n(142),n(30),n(221),n(52),n(508)),d=n.n(c),m=n(504),f=n(503),v=n(176),h=n(117),_=n(31),x=n.n(_),k=(n(141),{mixins:[v.validationMixin,m.a],head:function(){return{title:"Post Datatable"}},data:function(){return{form_tags:[],items:[],headers:[{text:"No",align:"start",sortable:!1,value:"no"},{text:"Name",value:"name"},{text:"Title",value:"title"},{text:"Slug",value:"slug"},{text:"Publish",value:"publish"},{text:"Date / Time",value:"created_at"},{text:"Action",value:"id",sortable:!1}],form_content:"",form_title:"",form_publish:"",dialog:!1,dialogDelete:!1,deletedialog:!1,editedIndex:-1,search:"",tabledata:[],tabledata_total:0,loading:!0,options:{},publishselection:[{value:1,text:"Draft"},{value:2,text:"Publish"}],form_image:"",image:"",image_preview:"",image_name:""}},validations:{form_content:{required:h.required},form_title:{required:h.required},form_publish:{required:h.required}},created:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.timezone="Asia/Singapore",e.editorConfig={simpleUpload:{uploadUrl:"https://backend.inhinyeru.com/api/ckeditor",withCredentials:!0,headers:{Accept:"application/json",Timezone:e.timezone,identifier:e.image_id,"X-XSRF-TOKEN":e.$auth.$storage.getCookies()["XSRF-TOKEN"]}}};case 2:case"end":return t.stop()}}),t)})))()},components:{"ckeditor-nuxt":function(){return n.e(1).then(n.t.bind(null,825,7))}},computed:{titleErrors:function(){var e=[];return this.$v.form_title.$dirty?(!this.$v.form_title.required&&e.push("Title is required."),e):e},contentErrors:function(){var e=[];return this.$v.form_content.$dirty?(!this.$v.form_content.required&&e.push("Content is required."),e):e}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0},dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},fetch:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,l,c,d,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/sanctum/csrf-cookie");case 2:return t.next=4,e.$axios.$get("admin/blog/tags/data");case 4:for(n=t.sent,l=0,c=Object.entries(n.data);l<c.length;l++)d=Object(o.a)(c[l],2),d[0],m=d[1],e.items=[].concat(Object(r.a)(e.items),[m.name]);case 6:case"end":return t.stop()}}),t)})))()},mounted:function(){this.getDataFromApi()},methods:{handleFileUpload:function(e){var t=this.$refs.file.files[0];this.image_preview=URL.createObjectURL(t);try{this.image_name=this.$refs.file.files[0].name,this.form_image=this.$refs.file.files[0]}catch(e){console.log(e)}},remove_image:function(){return this.$refs.file.value=null,this.image_name="",this.image="",this.image_preview="",this.form_image="",!1},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},editItem:function(e){this.image_id=this.tabledata[this.tabledata.indexOf(e)].ckeditor_log,this.form_title=this.tabledata[this.tabledata.indexOf(e)].title,this.form_image=this.tabledata[this.tabledata.indexOf(e)].image,this.form_content=this.tabledata[this.tabledata.indexOf(e)].content,this.form_tags=this.tabledata[this.tabledata.indexOf(e)].tags,this.form_publish=this.tabledata[this.tabledata.indexOf(e)].publishvalue,this.editedIndex=this.tabledata.indexOf(e),this.dialog=!0},deleteItem:function(e){this.editedIndex=this.tabledata.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},SaveEdited:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/sanctum/csrf-cookie").then((function(e){}));case 2:x.a.start(),n=new FormData,r=e.tabledata[e.editedIndex].id,e.form_content=d.a.inlineContent(e.form_content,f.a.styles),n.append("tags",e.form_tags),n.append("post_id",e.tabledata[e.editedIndex].id),n.append("title",e.form_title),n.append("content",e.form_content),n.append("publish",e.form_publish),n.append("image",e.form_image);try{e.$axios.$post("admin/blog/update/".concat(r),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.tabledata[e.editedIndex].tags=e.form_tags,e.tabledata[e.editedIndex].title=e.form_title,e.tabledata[e.editedIndex].content=e.form_content,e.tabledata[e.editedIndex].publish=1==e.form_publish?"Draft":"Publish",e.tabledata[e.editedIndex].publishvalue=e.form_publish,e.tabledata[e.editedIndex].image=t.image,e.dialog=!1,e.form_publish="",e.image_preview="",e.$fetch(),x.a.done()})).catch((function(t){e.form_publish="",x.a.done()})).finally((function(){}))}catch(e){}case 13:case"end":return t.stop()}}),t)})))()},deleteItemConfirm:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/sanctum/csrf-cookie").then((function(e){}));case 2:n=e.tabledata[e.editedIndex].id;try{e.$axios.$delete("admin/blog/delete/".concat(n)).then((function(e){})).catch((function(e){})).finally((function(){}))}catch(e){}e.tabledata.splice(e.editedIndex,1),e.closeDelete();case 6:case"end":return t.stop()}}),t)})))()},getDataFromApi:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,r,l,c,d,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,n=e.options,r=n.sortBy,l=n.sortDesc,c=n.page,d=n.itemsPerPage,(m=new FormData).append("sortDesc",l),m.append("sortBy",r),m.append("page",c),m.append("itemsPerPage",d),m.append("search",e.search),t.next=10,e.$axios.$get("/sanctum/csrf-cookie").then((function(e){}));case 10:e.$axios.$post("admin/blog/datatable",m).then((function(t){var data=[],n=1;n=1==c?1:(c-1)*d+1;for(var r=0,l=Object.entries(t.data);r<l.length;r++){var m=Object(o.a)(l[r],2),f=(m[0],m[1]);data.push({no:n,name:f.name,id:f.id,slug:f.slug,title:f.title,content:f.content,publish:1==f.publish?"Draft":"Publish",publishvalue:f.publish,image:f.image,created_at:f.human_date,ckeditor_log:f.ckeditor_log,tags:f.tags}),n++}e.tabledata=data,e.tabledata_total=t.total,e.loading=!1})).catch((function(t){e.loading=!1})).finally((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t)})))()}}}),$=(n(786),n(36)),y=n(37),w=n.n(y),C=n(207),I=n(485),O=n(483),D=n(482),T=n(540),V=n(494),S=n(887),j=n(495),R=n(827),P=n(501),F=n(209),A=n(173),U=n(496),E=n(533),M=n(59),N=n(500),z=n(488),B=n(60),J=n(219),component=Object($.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"grey ligthen-3 pa-0 ma-0",attrs:{fluid:"","min-height":""}},[n("v-sheet",{staticClass:"blue ligthen-3 pa-5 pt-10 pb-10",attrs:{"min-height":""}},[n("v-card",[n("v-dialog",{attrs:{persistent:"",fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition",scrollable:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",{attrs:{tile:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary","max-height":"50vh"}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1),e._v(" "),n("v-toolbar-title",[e._v("Settings")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},on:{click:e.SaveEdited}},[e._v(" Save ")])],1)],1),e._v(" "),n("v-card-text",[n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Title"},on:{blur:function(t){return e.$v.form_title.$touch()},input:function(t){return e.$v.form_title.$touch()}},model:{value:e.form_title,callback:function(t){e.form_title=t},expression:"form_title"}}),e._v(" "),e.$v.form_title.$error?[e.$v.form_title.required?e._e():n("div",{staticClass:"errorMessage red--text"},[e._v("\n                    Title is required.\n                  ")])]:e._e()],2)],1),e._v(" "),n("v-row",[n("v-col",[n("v-select",{attrs:{items:e.publishselection,"item-value":"value","item-text":"text",label:"Publish"},on:{blur:function(t){return e.$v.form_publish.$touch()}},model:{value:e.form_publish,callback:function(t){e.form_publish=t},expression:"form_publish"}}),e._v(" "),e.$v.form_publish.$error?[e.$v.form_publish.required?e._e():n("p",{staticClass:"errorMessage red--text"},[e._v("\n                    Select Publish is required.\n                  ")])]:e._e()],2)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-combobox",{attrs:{items:e.items,label:"Tags",multiple:"",chips:""},scopedSlots:e._u([{key:"selection",fn:function(data){return[n("v-chip",e._b({key:JSON.stringify(data.item),attrs:{"input-value":data.selected,disabled:data.disabled},on:{"click:close":function(e){return data.parent.selectItem(data.item)}}},"v-chip",data.attrs,!1),[n("v-avatar",{staticClass:"accent white--text",attrs:{left:""},domProps:{textContent:e._s(data.item.slice(0,1).toUpperCase())}}),e._v("\n                      "+e._s(data.item)+"\n                    ")],1)]}}]),model:{value:e.form_tags,callback:function(t){e.form_tags=t},expression:"form_tags"}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{lg:"4"}},[n("input",{ref:"file",attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),e._v(" "),n("v-card",[e.image_preview?n("v-img",{attrs:{src:e.image_preview}}):n("div",[e.form_image?n("v-img",{attrs:{src:e.form_image}}):e._e()],1)],1),e._v(" "),""!=this.image_preview||""!=this.form_image?n("label",{staticClass:"red--text",attrs:{onclick:"return false"},on:{click:function(t){return e.remove_image()}}},[e._v("Remove")]):e._e()],1),e._v(" "),n("v-spacer")],1),e._v(" "),n("v-row",[n("v-col",{},[n("label",{staticClass:"black--text",attrs:{for:""}},[e._v("Content")]),e._v(" "),n("br"),e._v(" "),n("client-only",{attrs:{placeholder:"loading..."}},[n("ckeditor-nuxt",{staticStyle:{height:"300px"},attrs:{config:e.editorConfig,"error-messages":e.contentErrors},on:{blur:function(t){return e.$v.form_content.$touch()},input:function(t){return e.$v.form_content.$touch()}},model:{value:e.form_content,callback:function(t){e.form_content=t},expression:"form_content"}}),e._v(" "),e.$v.form_content.$error?[e.$v.form_content.required?e._e():n("div",{staticClass:"errorMessage red--text"},[e._v("\n                      Content is required.\n                    ")])]:e._e()],2)],1)],1)],1),e._v(" "),n("div",{staticStyle:{flex:"1 1 auto"}})],1)],1),e._v(" "),n("v-card-title",[e._v("\n        Post Table\n        "),n("v-spacer"),e._v(" "),n("v-spacer"),e._v(" "),n("v-spacer"),e._v(" "),n("v-spacer"),e._v(" "),n("v-spacer"),e._v(" "),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{change:e.getDataFromApi},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"primary",to:"/admin/blog/create"}},[e._v("Create")])],1),e._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.tabledata,options:e.options,"server-items-length":e.tabledata_total,loading:e.loading,"footer-props":{"items-per-page-options":[5,10,20,30,40,50]}},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("Are you sure you want to delete this item?")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),e._v(" "),n("v-spacer")],1)],1)],1)]},proxy:!0},{key:"header.id",fn:function(t){var header=t.header;return[e._v("\n          "+e._s(header.text.toUpperCase())+"\n        ")]}},{key:"header.name",fn:function(t){var header=t.header;return[e._v("\n          "+e._s(header.text.toUpperCase())+"\n        ")]}},{key:"item.publish",fn:function(t){var n=t.item;return[e._v("\n          "+e._s(n.publish)+"\n        ")]}},{key:"item.created_at",fn:function(t){var n=t.item;return[e._v("\n          "+e._s(n.created_at)+"\n        ")]}},{key:"item.id",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(r)}}},[e._v("\n            mdi-pencil\n          ")]),e._v(" "),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(r)}}},[e._v("\n            mdi-delete\n          ")])]}}])})],1)],1)],1)}),[],!1,null,"217adfe5",null);t.default=component.exports;w()(component,{Template:n(220).default}),w()(component,{VAvatar:C.a,VBtn:I.a,VCard:O.a,VCardActions:D.a,VCardText:D.b,VCardTitle:D.c,VChip:T.a,VCol:V.a,VCombobox:S.a,VContainer:j.a,VDataTable:R.a,VDialog:P.a,VIcon:F.a,VImg:A.a,VRow:U.a,VSelect:E.a,VSheet:M.a,VSpacer:N.a,VTextField:z.a,VToolbar:B.a,VToolbarItems:J.a,VToolbarTitle:J.b})}}]);