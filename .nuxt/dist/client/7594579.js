(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{609:function(e,t,r){var content=r(784);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(15).default)("4b292eac",content,!0,{sourceMap:!1})},783:function(e,t,r){"use strict";r(609)},784:function(e,t,r){var n=r(14)(!1);n.push([e.i,"ul.clean[data-v-bb86098a]{list-style:none!important;list-style-type:none!important}.ck-editor__editable[data-v-bb86098a],.ck.ck-content.ck-editor__editable[data-v-bb86098a],.ck.ck-content.ck-editor__editable.ck-rounded-corners.ck-editor__editable_inline[data-v-bb86098a],.ck.ck-content.ck-editor__editable_inline[data-v-bb86098a]{height:350px}",""]),e.exports=n},865:function(e,t,r){"use strict";r.r(t);var n=r(54),o=r(20),c=r(13),l=(r(52),r(22),r(38),r(43),r(222),r(25),r(29),r(302),r(508)),m=r.n(l),f=r(504),d=r(503),v=r(2),_=r(176),h=r(117);v.default.use(_.Vuelidate);var $={head:function(){return{title:"Create Post"}},mixins:[_.validationMixin,f.a],data:function(){return{tags:[],items:[],image_id:"",url_backend:"",form_content:"",form_title:"",form_publish:"",token:null,publishselection:[{value:1,text:"Draft"},{value:2,text:"Publish"}],image:"",image_preview:"",image_name:""}},validations:{form_content:{required:h.required},form_title:{required:h.required},form_publish:{required:h.required}},components:{"ckeditor-nuxt":function(){return r.e(1).then(r.t.bind(null,825,7))}},mounted:function(){return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},fetch:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,c,l,m,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/sanctum/csrf-cookie");case 2:return t.next=4,e.$axios.$get("admin/blog/tags/data");case 4:for(r=t.sent,c=0,l=Object.entries(r.data);c<l.length;c++)m=Object(o.a)(l[c],2),m[0],f=m[1],e.items=[].concat(Object(n.a)(e.items),[f.name]);case 6:case"end":return t.stop()}}),t)})))()},created:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.timezone="Asia/Singapore",e.image_id="blog-"+(new Date).getTime(),e.editorConfig={simpleUpload:{uploadUrl:"https://backend.inhinyeru.com/api/ckeditor",withCredentials:!0,headers:{Accept:"application/json",Timezone:e.timezone,identifier:e.image_id,"X-XSRF-TOKEN":e.$auth.$storage.getCookies()["XSRF-TOKEN"]}}},t.next=5,e.$axios.$get("/sanctum/csrf-cookie");case 5:case"end":return t.stop()}}),t)})))()},computed:{titleErrors:function(){var e=[];return this.$v.form_title.$dirty?(!this.$v.form_title.required&&e.push("Title is required."),e):e},contentErrors:function(){var e=[];return this.$v.form_content.$dirty?(!this.$v.form_content.required&&e.push("Content is required."),e):e}},methods:{handleFileUpload:function(e){var t=this.$refs.file.files[0];this.image_preview=URL.createObjectURL(t);try{this.image_name=this.$refs.file.files[0].name,this.image=this.$refs.file.files[0]}catch(e){console.log(e)}},remove_image:function(){return this.$refs.file.value=null,this.image_name="",this.image="",this.image_preview="",!1},onSubmit:function(){var e=this;if(this.form_title&&this.form_content&&this.form_publish){this.$axios.$get("/sanctum/csrf-cookie"),this.$toast.success("Sending"),this.form_content=m.a.inlineContent(this.form_content,d.a.styles);var t=new FormData;t.append("tags",this.tags),t.append("ckeditor_log",this.image_id),t.append("publish",this.form_publish),t.append("title",this.form_title),t.append("content",this.form_content),t.append("image",this.image),t.append("image_name",this.image_name),this.$axios.post("/admin/blog/create",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$toast.success("Done."),e.$fetch()})).catch((function(e){})).finally((function(){}))}else this.$toast.error("Validation failed.")}}},k=(r(783),r(36)),x=r(37),w=r.n(x),C=r(207),y=r(485),V=r(483),S=r(540),R=r(494),O=r(887),T=r(495),j=r(173),U=r(496),E=r(533),F=r(59),M=r(500),P=r(488),component=Object(k.a)($,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"grey ligthen-3 pa-0 ma-0",attrs:{fluid:"","min-height":"800vh"}},[r("v-sheet",{staticClass:"blue ligthen-3 pa-5 pt-10 pb-10",attrs:{"min-height":"200vh"}},[r("form",{staticClass:"white pa-5",attrs:{action:""}},[r("v-row",[r("v-col",[r("v-btn",{attrs:{color:"primary",depressed:"",to:"/admin/blog/manage"}},[e._v("\n            BACK\n          ")])],1)],1),e._v(" "),r("v-row",[r("v-col",[r("v-text-field",{attrs:{label:"Title"},on:{blur:function(t){return e.$v.form_title.$touch()},input:function(t){return e.$v.form_title.$touch()}},model:{value:e.form_title,callback:function(t){e.form_title=t},expression:"form_title"}}),e._v(" "),e.$v.form_title.$error?[e.$v.form_title.required?e._e():r("div",{staticClass:"errorMessage red--text"},[e._v("\n              Title is required.\n            ")])]:e._e()],2)],1),e._v(" "),r("v-row",[r("v-col",[r("v-select",{attrs:{items:e.publishselection,"item-value":"value","item-text":"text",label:"Publish"},on:{blur:function(t){return e.$v.form_publish.$touch()}},model:{value:e.form_publish,callback:function(t){e.form_publish=t},expression:"form_publish"}}),e._v(" "),e.$v.form_publish.$error?[e.$v.form_publish.required?e._e():r("p",{staticClass:"errorMessage red--text"},[e._v("\n              Select Publish is required.\n            ")])]:e._e()],2)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-combobox",{attrs:{items:e.items,label:"Tags",multiple:"",chips:""},scopedSlots:e._u([{key:"selection",fn:function(data){return[r("v-chip",e._b({key:JSON.stringify(data.item),attrs:{"input-value":data.selected,disabled:data.disabled},on:{"click:close":function(e){return data.parent.selectItem(data.item)}}},"v-chip",data.attrs,!1),[r("v-avatar",{staticClass:"accent white--text",attrs:{left:""},domProps:{textContent:e._s(data.item.slice(0,1).toUpperCase())}}),e._v("\n                "+e._s(data.item)+"\n              ")],1)]}}]),model:{value:e.tags,callback:function(t){e.tags=t},expression:"tags"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{lg:"4"}},[r("input",{ref:"file",attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}}),e._v(" "),r("v-card",[e.image_preview?r("v-img",{attrs:{src:e.image_preview}}):e._e()],1),e._v(" "),""!=this.image_preview?r("label",{staticClass:"red--text",attrs:{onclick:"return false"},on:{click:function(t){return e.remove_image()}}},[e._v("Remove")]):e._e()],1),e._v(" "),r("v-spacer")],1),e._v(" "),r("v-row",[r("v-col",[r("label",{staticClass:"black--text",attrs:{for:""}},[e._v("Content")]),e._v(" "),r("br"),e._v(" "),r("client-only",{attrs:{placeholder:"loading..."}},[r("ckeditor-nuxt",{attrs:{config:e.editorConfig,"error-messages":e.contentErrors},on:{blur:function(t){return e.$v.form_content.$touch()},input:function(t){return e.$v.form_content.$touch()}},model:{value:e.form_content,callback:function(t){e.form_content=t},expression:"form_content"}}),e._v(" "),e.$v.form_content.$error?[e.$v.form_content.required?e._e():r("div",{staticClass:"errorMessage red--text"},[e._v("\n                Content is required.\n              ")])]:e._e()],2)],1)],1),e._v(" "),r("v-row",[r("v-col",[r("v-btn",{staticClass:"ml-0",attrs:{color:"success"},on:{click:function(t){return e.onSubmit()}}},[r("label",{staticClass:"white-font"},[e._v("Submit")])])],1)],1)],1)])],1)}),[],!1,null,"bb86098a",null);t.default=component.exports;w()(component,{Template:r(220).default}),w()(component,{VAvatar:C.a,VBtn:y.a,VCard:V.a,VChip:S.a,VCol:R.a,VCombobox:O.a,VContainer:T.a,VImg:j.a,VRow:U.a,VSelect:E.a,VSheet:F.a,VSpacer:M.a,VTextField:P.a})}}]);